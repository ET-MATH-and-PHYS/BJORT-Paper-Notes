\section{The first directional derivative}

With the linearization results in the previous section we can now introduce directional differentiation for functors. We follow the procedure used to define the directional derivative in~\cite{BJORT}, and then proceed to show that we obtain a cartesian differential structure on our homotopy category $\cat{HoAbCat}_{\cat{Ch}}$ before extending results to include $2$-categorical structure.

\begin{defn}[label=defn:DirectionalDeriv]
    Let $F:\mathcal{B}\to \cat{Ch}(\mathcal{A})$ and let $B,V \in \mathcal{B}$, where we consider $V$ to act analogously to a direction vector in a Banach space. We define a functor $\nabla F:\mathcal{B}\times \mathcal{B}\to \cat{Ch}(\mathcal{A})$ by 
    %%
    \begin{equation*}
        \nabla F(V;X) := D_1(F(X\oplus -))(V)
    \end{equation*}
    %%
\end{defn}

We can also define the directional derivative of $F:\mathcal{B}\to \cat{Ch}(\mathcal{A})$ using the limit formulation of the directional derivative. These two constructions are equivalent.

\begin{lem}[label=DirDerivEquiv]
    Let $F:\mathcal{B}\to \cat{Ch}(\mathcal{A})$. Then there is an isomorphism 
    %%
    \begin{equation*}
        D_1^V(\ker(F(X\oplus V)\xrightarrow{F(\pi_X)}F(X)))\cong D_1(F(X\oplus -))(V)
    \end{equation*}
    %%
    as well as an isomorphism 
    %%
    \begin{equation*}
        D_1^V(\ker(F(X\oplus V)\xrightarrow{F(\pi_X)}F(X))) \cong D_1(F)(V)\oplus D_1^V(\text{cr}_2(F))(X,V)
    \end{equation*}
    %%
\end{lem}
\begin{proof}
    First, note that the kernel described in the Lemma is exactly our definition of the first cross-effect of $F(X\oplus -)$, so we obtain an isomorphism 
    %%
    \begin{equation*}
        D_1^V(\ker(F(X\oplus V)\xrightarrow{\pi_X}F(X))) \cong D_1^V(\text{cr}_1(F(X\oplus -)))(V)
    \end{equation*}
    %%
    An alternate perspective on $\ker(F(X\oplus V)\xrightarrow{F(\pi_X)} F(X))$ uses the fact that $F(X)\xrightarrow{F(\iota_X)}F(X\oplus V)$ is a section for the projection. Now, from the isomorphisms
    %%
    \begin{align*}
        F(X\oplus V) &\cong F(0)\oplus \text{cr}_1(F)(X\oplus V) \\
        &\cong F(0)\oplus \text{cr}_1(F)(X)\oplus \text{cr}_1(F)(V)\oplus \text{cr}_2(F)(X,V) \\
        &\cong F(X)\oplus \text{cr}_1(F)(V)\oplus \text{cr}_2(F)(X,V)
    \end{align*}
    %%
    it follows that $\text{ker}(F(X\oplus V)\xrightarrow F(X))$ is isomorphic to $\text{cr}_1(F)(V)\oplus \text{cr}_2(F)(X,V)$. Then, since $D_1$ is strictly linear with respect to functors by Proposition~\ref{prop:D1Exact}, we obtain an isomorphism 
    %%
    \begin{align*}
        D_1^V(\ker(F(X\oplus V)\xrightarrow{\pi_X}F(X))) &\cong D_1^V(\text{cr}_1(F)(V)\oplus \text{cr}_2(F)(X,V)) \\
        &\cong D_1^V(\text{cr}_1(F))(V)\oplus D_1^V(\text{cr}_2(F))(X,V) \\
        &\cong D_1^V(F)(V)\oplus D_1^V(\text{cr}_2(F))(X,V)
    \end{align*}
    %%
    as desired.
\end{proof}

\textbf{CHECK THIS WITH KRISTINE AND FLORIAN}


Note that since $D_1$ preserves natural chain homotopy equivalences, so does $\nabla$, so for $F\simeq_{\cat{Ch}}G$, $\nabla F\simeq_{\cat{Ch}}\nabla G$.

We now will state the theorem that with this operation $\cat{HoAbCat}_{\cat{Ch}}$ becomes a cartesian differential category before proving each piece of the theorem through a sequence of lemmas.


\begin{thm}[label=thm:6.5]
    The category $\cat{AbCat}_{\cat{Ch}}$ together with $\nabla$ satosfies the following properties for functors $F,G:\mathcal{B}\to \cat{Ch}(\mathcal{A})$, $H:\mathcal{C}\to \cat{Ch}(\mathcal{B})$, and $K:\mathcal{B}\to \cat{Ch}(\mathcal{D})$:
    \begin{itemize}
        \item[(i)] $\nabla$ is linear in the sense that 
            %%
            \begin{equation*}
                \nabla(F\oplus G)\cong \nabla(F)\oplus \nabla(G)
            \end{equation*}
            %%
        \item[(ii)] $\nabla F$ is linear in the direction variable, which is to say $\nabla F$ is strictly reduced and degree 1, so 
            %%
            \begin{equation*}
                \nabla F(V\oplus W;X)\simeq_{\cat{Ch}}\nabla F(V;X)\oplus \nabla F(W;X)
            \end{equation*}
            %%
        and $\nabla F(0;X)\cong 0$.
        \item[(iii)] The directional derivative of the degree zero functor $\deg_0^\mathcal{A}:\mathcal{A}\to \cat{Ch}(\mathcal{A})$ is the projection onto the direction, which is to say 
            %%
            \begin{equation*}
                \nabla \deg_0^\mathcal{A}(V;X)\cong V
            \end{equation*}
            %%
        \item[(iv)] We have an isomorphism
            %%
            \begin{equation*}
                \nabla \langle F,K\rangle (V;X)\cong \langle \nabla F(V;X),\nabla G(V;X)\rangle
            \end{equation*}
            %%
        \item[(v)] There is a natural chain homotopy equivalence 
            %%
            \begin{equation*}
                \nabla (F\lhd H)(V;X)\simeq_{\cat{Ch}}\nabla F \lhd (\nabla G(V;X);G(X))
            \end{equation*}
            %%
        \item[(vi)] There is an isomorphism 
            %%
            \begin{equation*}
                \nabla (\nabla F)((Z;0);(0;X)) \cong \nabla F(Z;X)
            \end{equation*}
            %%
        \item[(vii)] There is a natural chain homotopy equivalence 
            %%
            \begin{equation*}
                \nabla (\nabla F)((Z;W);(V;X)) \simeq_{\cat{Ch}} \nabla (\nabla F)((Z;V);(W;X))
            \end{equation*}
            %%
    \end{itemize}
\end{thm}

As a result of Theorem~\ref{thm:6.5} we conclude that the homotopy category $\cat{HoAbCat}_{\cat{Ch}}$ is a cartesian differential category. We now proceed to the proof of Theorem~\ref{thm:6.5} in segments.


We begin by proving parts (i) through (iv). For some of the proofs it is useful to note that $D_1^{i_1\times \cdots \times i_k}$ is exact, and hence additive, since it is defined in terms $D_1$ which is exact and evaluations, where finite limits in functor categories are computed pointwise. Further, we have the following brief lemma on pre-composition and additivity of functors.

\begin{lem}[label=lem:pre-compAdd]
    Let $H:\mathcal{A}\to \mathcal{B}$ be a functor between abelian categories. Then $H$ induces an additive functor $H^*:\text{Fun}(\mathcal{B},\mathcal{C})\to \text{Fun}(\mathcal{A},\mathcal{C})$ for any abelian category $\mathcal{C}$.
\end{lem}
\begin{proof}
    Let $F,G:\mathcal{B}\to \mathcal{C}$. Then $H^*(F\oplus G) = (F\oplus G)\circ H \cong (F\circ H)\oplus (G\circ H)$ since limits in functor categories are computed pointwise when the limit exists in the codomain category.
\end{proof}

We now have sufficient tools to begin proving the first four properties in Theorem~\ref{thm:6.5}.


\begin{proof}[Part (i)]
    Note that $\nabla = D_1^1\circ (-\oplus-)^*$. Thus, as a composite of additive functors, $\nabla$ is additive.
\end{proof}


\begin{proof}[Part (ii)]
    Since $\nabla F = D_1^1(F\circ (-\oplus -))$, the result follows by Proposition~\ref{prop:multiVarLin}. 
\end{proof}


\begin{proof}[Part (iii)]
    Observe that $\nabla\deg_0^\mathcal{A} = D_1^1(\deg_0^\mathcal{A}\circ (-\oplus -))$. Then, since $\text{cr}_1(\deg_0^\mathcal{A}\circ (A\oplus -)) \cong \deg_0^\mathcal{A}$ naturally for any fixed $A \in \mathcal{A}$. Thus, as $D_1 = P_1(\text{cr}_1)$ and $P_1(\deg_0^\mathcal{A}) \cong \deg_0^\mathcal{A}$, we obtain the desired natural isomorphism 
    %%
    \begin{equation*}
        \nabla\deg_0^\mathcal{A} \cong \pi_0
    \end{equation*}
    %%
    \textbf{Needs some more details}.
\end{proof}


\begin{proof}[Part (iv)]
    This result follows immediately from Lemma~\ref{lem:5.18}.
\end{proof}

The remaining three properties will require some additional work. In particular, we will begin by proving some preliminary lemmas to assist with proving the properties. Since property (v) has the most involved argument we will begin by developing the theory for properties (vi) and (vii). 

